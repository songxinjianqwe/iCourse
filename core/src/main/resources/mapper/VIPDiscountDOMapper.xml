<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.sinjinsong.icourse.core.dao.vip.VIPDiscountDOMapper">
  <resultMap id="BaseResultMap" type="com.sinjinsong.icourse.core.domain.entity.vip.VIPDiscountDO">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <constructor>
      <idArg column="vip_level" javaType="java.lang.Integer" jdbcType="INTEGER" />
      <arg column="discount" javaType="java.lang.Double" jdbcType="DOUBLE" />
      <arg column="least_consumptions" javaType="java.lang.Double" jdbcType="DOUBLE" />
    </constructor>
  </resultMap>
  <sql id="Base_Column_List">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    vip_level, discount, least_consumptions
  </sql>
  <select id="selectByPrimaryKey" parameterType="java.lang.Integer" resultMap="BaseResultMap">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    select 
    <include refid="Base_Column_List" />
    from vip_discount
    where vip_level = #{vipLevel,jdbcType=INTEGER}
  </select>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.Integer">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    delete from vip_discount
    where vip_level = #{vipLevel,jdbcType=INTEGER}
  </delete>
  <insert id="insert" parameterType="com.sinjinsong.icourse.core.domain.entity.vip.VIPDiscountDO">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    insert into vip_discount (vip_level, discount, least_consumptions
      )
    values (#{vipLevel,jdbcType=INTEGER}, #{discount,jdbcType=DOUBLE}, #{leastConsumptions,jdbcType=DOUBLE}
      )
  </insert>
  <insert id="insertSelective" parameterType="com.sinjinsong.icourse.core.domain.entity.vip.VIPDiscountDO">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    insert into vip_discount
    <trim prefix="(" suffix=")" suffixOverrides=",">
      <if test="vipLevel != null">
        vip_level,
      </if>
      <if test="discount != null">
        discount,
      </if>
      <if test="leastConsumptions != null">
        least_consumptions,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides=",">
      <if test="vipLevel != null">
        #{vipLevel,jdbcType=INTEGER},
      </if>
      <if test="discount != null">
        #{discount,jdbcType=DOUBLE},
      </if>
      <if test="leastConsumptions != null">
        #{leastConsumptions,jdbcType=DOUBLE},
      </if>
    </trim>
  </insert>
  <update id="updateByPrimaryKeySelective" parameterType="com.sinjinsong.icourse.core.domain.entity.vip.VIPDiscountDO">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update vip_discount
    <set>
      <if test="discount != null">
        discount = #{discount,jdbcType=DOUBLE},
      </if>
      <if test="leastConsumptions != null">
        least_consumptions = #{leastConsumptions,jdbcType=DOUBLE},
      </if>
    </set>
    where vip_level = #{vipLevel,jdbcType=INTEGER}
  </update>
  <update id="updateByPrimaryKey" parameterType="com.sinjinsong.icourse.core.domain.entity.vip.VIPDiscountDO">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update vip_discount
    set discount = #{discount,jdbcType=DOUBLE},
      least_consumptions = #{leastConsumptions,jdbcType=DOUBLE}
    where vip_level = #{vipLevel,jdbcType=INTEGER}
  </update>
    
    <select id="findDiscountByVipLevel" resultType="double">
        select discount
        from vip_discount
        where vip_level = #{vipLevel};
    </select>
    
    <select id="findVipLevelByConsumptions" resultType="int" >
        select min(vip_level)
        from vip_discount
        where least_consumptions <= #{consumptions}
    </select>
</mapper>